# AI Court - Flutter Application

A cross-platform Flutter mobile application for AI-powered legal case management and judgment. This
app provides the same functionality as the Next.js web application but in a native mobile
experience.

## Features

- **User Authentication**: Simple demo login system
- **Dashboard**: View case statistics and recent cases
- **Case Management**: Create, view, and manage legal cases
- **AI-Powered Verdicts**: Get instant verdicts from AI Judge model via backend API
- **GenAI Reasoning**: Detailed legal reasoning generated by Local GenAI (Phi-3 Mini)
- **Evidence Support**: Additional evidence field for supporting documentation
- **Debate Feature**: Real-time legal debates with room codes
- **Material Design**: Beautiful UI with Material 3 design
- **Dark/Light Theme**: Automatic theme based on system settings
- **Cross-Platform**: Runs on Android, iOS, and Web

## Prerequisites

- Flutter SDK 3.0.0 or higher
- Dart 3.0.0 or higher
- Android Studio / Xcode (for mobile development)
- Backend server running on `http://localhost:5000`

## Installation

### 1. Install Flutter

Follow the official Flutter installation guide for your platform:
https://docs.flutter.dev/get-started/install

### 2. Clone and Navigate

```bash
cd "Frontend/ai_court_app"
```

### 3. Get Dependencies

```bash
flutter pub get
```

### 4. Configure Backend URL

If your backend is running on a different URL, update the API base URL in:
`lib/services/api_service.dart`

```dart
static const String baseUrl = 'http://YOUR_BACKEND_URL:5000';
```

**Note for Android Emulator**: Use `http://10.0.2.2:5000` instead of `localhost`
**Note for iOS Simulator**: Use `http://localhost:5000` or your computer's IP address

## Running the Application

### Android

```bash
flutter run
```

Or use Android Studio:

1. Open the project in Android Studio
2. Select an Android emulator or connected device
3. Click the "Run" button

### iOS

```bash
flutter run
```

Or use Xcode:

1. Open `ios/Runner.xcworkspace` in Xcode
2. Select a simulator or connected iOS device
3. Click the "Run" button

### Web

```bash
flutter run -d chrome
```

### Desktop (Windows/macOS/Linux)

```bash
flutter run -d windows  # For Windows
flutter run -d macos    # For macOS
flutter run -d linux    # For Linux
```

## Project Structure

```
lib/
├── main.dart                    # App entry point and navigation
├── models/                      # Data models
│   ├── case_data.dart          # Case and Verdict models
│   └── debate_room.dart        # Debate room model
├── screens/                     # App screens
│   ├── login_screen.dart       # Login/authentication
│   ├── dashboard_screen.dart   # Main dashboard
│   ├── cases_screen.dart       # Cases list
│   ├── case_detail_screen.dart # Case details and verdict
│   ├── new_case_screen.dart    # Create new case with AI
│   ├── debate_screen.dart      # Debate home
│   ├── debate_start_screen.dart # Start debate room
│   └── debate_join_screen.dart  # Join debate room
└── services/                    # Services and utilities
    ├── api_service.dart        # Backend API communication
    └── storage_service.dart    # Local data persistence
```

## Backend Integration

The app communicates with the Flask backend API:

### API Endpoints

#### 1. Submit Case for Verdict

- **Endpoint**: `POST /verdict`
- **Purpose**: Get AI verdict for a case
- **Request**:
  ```json
  {
    "plaintiff": "Plaintiff statement...",
    "defendant": "Defendant statement...",
    "evidence": "Additional evidence..."
  }
  ```
- **Response**:
  ```json
  {
    "winner": "Plaintiff/Defendant/Neutral",
    "confidence": "high/medium/low",
    "model": "AI Judge ML Model",
    "plaintiff_score": 8,
    "defendant_score": 5
  }
  ```

#### 2. Generate Reasoning

- **Endpoint**: `POST /api/genai_reason`
- **Purpose**: Generate detailed legal reasoning
- **Request**:
  ```json
  {
    "plaintiff": "Plaintiff statement...",
    "defendant": "Defendant statement...",
    "evidence": "Additional evidence...",
    "verdict": "Plaintiff"
  }
  ```
- **Response**:
  ```json
  {
    "reasoning": "Detailed legal reasoning...",
    "model": "Local GenAI (Phi-3 Mini)"
  }
  ```

#### 3. Health Check

- **Endpoint**: `GET /health`
- **Purpose**: Check backend status

## App Features

### 1. Login

- Demo authentication system
- Any email/password combination works
- User session persisted locally

### 2. Dashboard

- View total, pending, and completed cases
- Quick access to recent cases
- Navigate to create new case or view all cases

### 3. Cases Management

- **List View**: See all your cases with status badges
- **Create New**: Submit case with plaintiff, defendant, and evidence
- **Case Details**: View full case information and AI verdict
- **AI Integration**: Automatic verdict generation using backend AI

### 4. Case Creation Flow

1. Enter case title, plaintiff statement, defendant statement
2. Optionally add evidence
3. Submit to backend API
4. AI analyzes both statements
5. Generate detailed reasoning using GenAI
6. Save case with verdict locally
7. Navigate to case details

### 5. Debate Feature

- **Start Debate**: Create a debate room with 6-digit code
- **Join Debate**: Enter code to join existing debate
- **Role Selection**: Choose Plaintiff or Defendant role
- **Code Sharing**: Copy room code to clipboard

## Data Persistence

The app uses `shared_preferences` for local data storage:

- **User Session**: Stored securely on device
- **Cases**: All cases saved locally with verdicts
- **Debate Rooms**: Debate room information stored locally

### Data Structure

Cases are stored with the following structure:

```dart
{
  "id": "timestamp",
  "title": "Case title",
  "plaintiff": "Plaintiff statement",
  "defendant": "Defendant statement",
  "evidence": "Optional evidence",
  "verdict": {
    "winner": "Plaintiff/Defendant/Neutral",
    "reasoning": "AI-generated reasoning",
    "confidence": "high/medium/low",
    "model": "Model name",
    "plaintiff_score": 8,
    "defendant_score": 5,
    "reasoning_model": "GenAI model name"
  },
  "status": "resolved",
  "createdAt": "ISO timestamp"
}
```

## UI/UX Features

- **Material 3 Design**: Modern, beautiful UI following Material Design 3 guidelines
- **Responsive**: Works on phones, tablets, and desktops
- **Dark/Light Theme**: Automatic theme based on system preference
- **Smooth Animations**: Page transitions and loading states
- **Error Handling**: Clear error messages and backend connectivity warnings
- **Form Validation**: Input validation on all forms
- **Loading States**: Visual feedback during API calls

## Dependencies

```yaml
dependencies:
  flutter: sdk
  http: ^1.2.0                  # HTTP requests to backend
  provider: ^6.1.1              # State management (if needed)
  shared_preferences: ^2.2.2    # Local data storage
  intl: ^0.19.0                 # Date formatting
  flutter_markdown: ^0.7.4+1    # Markdown rendering
```

## Configuration

### Android Network Permissions

The app requires internet permission (already configured in
`android/app/src/main/AndroidManifest.xml`):

```xml
<uses-permission android:name="android.permission.INTERNET"/>
```

### iOS Network Configuration

For local development, network security is configured in `ios/Runner/Info.plist`.

## Troubleshooting

### Backend Connection Issues

If you see "Cannot connect to backend server":

1. **Ensure Backend is Running**:
   ```bash
   cd Backend
   python app.py
   ```

2. **Check Backend URL**:
    - For Android Emulator: Use `http://10.0.2.2:5000`
    - For iOS Simulator: Use `http://localhost:5000`
    - For Physical Device: Use your computer's IP address

3. **Firewall Settings**: Ensure your firewall allows connections on port 5000

4. **CORS Configuration**: The Flask backend should have CORS enabled (already configured)

### Build Issues

If you encounter build errors:

```bash
flutter clean
flutter pub get
flutter run
```

### Android Emulator Network

If using Android emulator and cannot connect to localhost:

```dart
// In lib/services/api_service.dart
static const String baseUrl = 'http://10.0.2.2:5000';
```

## Running the Full System

### Step 1: Start Backend

```bash
cd Backend
python app.py
```

Backend runs on: `http://localhost:5000`

### Step 2: Start Flutter App

```bash
cd Frontend/ai_court_app
flutter run
```

### Step 3: Use the App

1. Open the app on your device/emulator
2. Login with any credentials
3. Create a new case
4. Submit for AI judgment
5. View the verdict and reasoning

## Building for Production

### Android APK

```bash
flutter build apk --release
```

Output: `build/app/outputs/flutter-apk/app-release.apk`

### Android App Bundle (for Play Store)

```bash
flutter build appbundle --release
```

### iOS

```bash
flutter build ios --release
```

Then archive and distribute via Xcode

### Web

```bash
flutter build web --release
```

Output: `build/web/`

## License

This project is part of the AI Court system.

## Contributing

1. Make changes to the codebase
2. Test thoroughly on multiple platforms
3. Ensure backend integration works
4. Update documentation as needed

## Support

For issues or questions:

- Check backend logs for API errors
- Verify network connectivity
- Check device console for Flutter errors
- Ensure all dependencies are installed

## Future Enhancements

- Real-time debate room synchronization
- Push notifications for verdicts
- Offline mode with sync
- Case search and filtering
- PDF export of verdicts
- Multi-language support
- Biometric authentication
- Chat feature in debate rooms

## Screenshots

[Add screenshots of your app here]

---

**Built with ❤️ using Flutter**
